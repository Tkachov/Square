# Классы wstream и safe_wstream

## Общая информация

В системе Android существует «sandbox», в котором хранятся файлы вашего приложения. Эти файлы не могут считываться или модифицироваться с помощью std::fstream. Поэтому Square представляет классы wstream и safe_wstream, которые могут писать в файлы приложения. Для чтения файлов могут использоваться функции **[read_file()](21_utils_h.md#void-read_filestringstream-destination-const-char-name)**.

Эти классы напоминают упрощённый std::ofstream. safe_wstream сбрасывает на диск все данные сразу же (поэтому, если приложение упадёт, файл будет содержать всё, что должно было быть записано до падения), хотя может быть из-за этого немного медленнее, чем wstream (который не гарантирует, что весь вывод будет записан в файл в случае падения).

Оба класса имеют схожий интерфейс, поэтому функции будут перечислены для обоих классов.

## Функции

##### `wstream()`
##### `safe_wstream()`
Конструктор (файлы не открываются).  

----
##### `wstream(string name, bool append = false)`
##### `safe_wstream(string name, bool append = false)`
Конструктор, открывающий файл с именем **name** для записи (если **append** равняется **false**) или для добавления в конец файла (если **append** равняется **true**).  

----
##### `void open(string name, bool append = false)`
Открывает файл с именем **name** для записи (если **append** равняется **false**) или для добавления в конец файла (если **append** равняется **true**).  

----
##### `void close()`
Закрывает открытый файл.  

----
##### `bool write(const char* str)`
Записывает **str** в открытый файл. Возвращает **true**, если запись прошла успешно или **false** в противном случае.  

----
##### `bool write(string& str)`
Записывает **str** в открытый файл. Возвращает **true**, если запись прошла успешно или **false** в противном случае.

----
##### `template<class T> wstream& operator<<(const T& p)`
##### `template<class T> safe_wstream& operator<<(const T& p)`
Записывает **p** в открытый файл.  
Возвращает ссылку на тот же объект wstream/safe_wstream, чтобы его можно было использовать по цепочке:  
`example_wstream << a << b << c << d << e;`  
   
   
**Предыдущий файл:** [Класс Timer](19_Timer.md)  
**[Содержание](00_Contents.md)**  
**Следующий файл:** [Файл utils.h](21_utils_h.md)