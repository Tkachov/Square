# Класс Resources

## Общая информация

Класс Resources загружает ресурсы и хранит их в памяти. Если вы запросите уже загруженный файл, объект класса выдаст его вам мгновенно. Функции класса статичны, то есть вы можете загрузить ресурсы из любого места в своём коде.

## Функции

##### `Frame* load_texture(string filename)`
Загружает изображение из файла с указанным именем и возвращает объект [Frame](12_Frame.md), содержащий идентификатор загруженной текстуры OpenGL.
Если загрузка не удастся, функция бросит строку с описанием ошибки как исключение.  
Если **[DEBUG_LOG_IMAGE_LOADING](22_settings_h.md#debug_log_image_loading)** равна 1, пишет сообщения в лог.  

----
##### `Sprite load_sprite(string filename)`
Загружает файл с указанным именем, создаёт объект [Sprite](15_Sprite.md), соответствующий спрайту, [описанному в этом файле](07_Resources.md#%D0%A1%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0-%D1%84%D0%B0%D0%B9%D0%BB%D0%B0-sprite), и возвращает этот объект. Все кадры загружаются функцией **[load_texture()](07_Resources.md#frame-load_texturestring-filename)**.  
Если **[DEBUG_LOG_SPRITE_LOADING](22_settings_h.md#debug_log_sprite_loading)** равна 1, пишет сообщения в лог. 

----
##### `TTF_Font* load_font(string name, int size)`
Загружает шрифт с указанным именем и размером и возвращает его. Шрифт ищется в папке C:\Windows\Fonts\ на компьютере пользователя. Если шрифт не будет там найден, он будет искаться в папке res\fnt\ вашего проекта. Если и в ней не будет найден соответствующий шрифт, функция бросит строку с описанием ошибки как исключение.  
Если загрузка не удастся, строка с описанием ошибки также будет брошена как исключение.  

----
##### `Sprite make_sprite(string filename)`
Создаёт объект Sprite, содержащий всего один кадр. Этот кадр загружается функцией **[load_texture()](07_Resources.md#frame-load_texturestring-filename)** из файла с указанным именем.  

----
##### `bool free_font(string name, int size)`
Очищает память шрифта с указанным именем и размером и возвращает **true**. Если шрифт с указанным именем и размером не был загружен, возвращает **false**.  

----
##### `bool free_texture(string filename)`
Очищает память текстуры OpenGL, соответствующей текстуре из файла с указанным именем, и возвращает **true**. Если текстура из файла с указанным именем не была загружена, возвращает **false**.    

----
##### `void free_textures()`
Очищает память всех текстур OpenGL, хранящихся объектом Resources в данный момент.

## Структура файла .sprite

В первой строке файла указаны два числа: **frames** и **animspeed** (**animspeed** указывает интервал между двумя кадрами спрайта (количество обновлений экрана)).  
Следующие **frames** строк содержат строку, описывающую кадр. Первый символ таких строк указывает формат. Square 0.3.0 поддерживает два формата: 's' и 'w'.  

### Часть изображения

Строка этого формата начинается с символа 's'. Она также содержит имя файла, отрисовываемую область изображения и смещения по осям X и Y.  

Выглядит это так: `s <filename> <left> <top> <right> <bottom> <x> <y>`.  
Например, `s tileset.png 128 64 32 32 0 0` соответствует кадру 32x32, расположенному в позиции (128, 64) изображения tileset.png.  

### Всё изображение

Строка этого формата начинается с символа 'w' и содержит только имя файла и смещения по осям X и Y.  

Выглядит это так: `w <filename> <x> <y>`.  
Например, `w background_image.png 10 10` соответствует кадру, содержащему всё изображение background_image.png и отрисовывающемуся со смещением 10 пикселей по осям X и Y.  
   
   
**Предыдущий файл:** [Класс Main_Window](06_Main_Window.md)  
**[Содержание](00_Contents.md)**  
**Следующий файл:** [Класс Input](08_Input.md)